---
layout: post
title: Backtesting in Python
subtitle: Backtesting the RSI strategy and the Moving Average Crossover strategy
tags: [Finance, Trading, Python, Backtesting, RSI, Moving Average Crossover]
comments: true
js:
    - https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML
---

Basics about lot sizes and pip values
--------------------------

I have $10,000 in my trading account, and I am happy to risk 2% on each trade. For example, I see that I want to enter a 
position at 1.2630 for a currency pair. I want to place my stop loss 20 pips below at 1.2610. So my risk on this trade is 20 pips.
Now I need to know what my position size will be, where I am risking no more than 1% of my overall account balance of $10,000.

In this trade, the math would look something like this:
$10,000 x 1% = $100
$100 / 20 pips = $5 per pip

1 lot is worth $10 per pip, so I would need to trade 0.5 lots to keep my risk at 1% of my account balance.

Backtesting
--------------------------

The initial parameters for the RSI strategy were

* RSI period: 14
* Overbought level: 70
* Oversold level: 30
* Time Frame: 15 minute candles 
* Currency Pair: GBP/USD
* Initial Capital: $10,000
* Stop Loss: 0.95 * Price 
* Take Profit: 1.1 * Price
* Commission: 0.002

![image]({{ '/assets/img/Finance_Folder/2024-02-09-backtest/backtest1.jpg' | relative_url }})
![image]({{ '/assets/img/Finance_Folder/2024-02-09-backtest/heatmap.jpg' | relative_url }})
![image]({{ '/assets/img/Finance_Folder/2024-02-09-backtest/optimal_backtest1.jpg' | relative_url }})

From my initial observations, the RSI strategy is not very profitable. 


{: .box-note}
**Similarity score:** $$\frac{(\sum Residual_i)^2}{\sum [Previous\:Probability_i \times (1 - Previous\:Probability_i)] + \lambda}$$  
_Intuition_: Assess the quality of a potential split at a node in a decision tree. The higher the similarity score,
the better the split.



